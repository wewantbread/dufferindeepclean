<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Book Online ‚Äî DufferinDeepClean</title>

  <!-- Fonts (match index + About Us script) -->
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;600;800&family=Great+Vibes&display=swap" rel="stylesheet" />

  <!-- Site CSS (keep your existing file) -->
  <link rel="stylesheet" href="style.css" />

  <!-- Page-specific styles to: 
       1) match index animated background (slightly darker here),
       2) unify logo font + animation,
       3) keep your booking UI exactly as-is otherwise. -->
  <style>
    /* ===== Animated seamless background (same as index, slightly darker) ===== */
    :root{
      /* Use the same seamless tile image you use on index */
      --bg-tile: url('backgroundbook.png');    /* or cleaning-pattern.png if that‚Äôs your tile */
      --tile-w: 1536px;
      --tile-h: 1024px;
      --tile-scale: 0.90;
      --tile-w-size: calc(var(--tile-w) * var(--tile-scale));
      --tile-h-size: calc(var(--tile-h) * var(--tile-scale));

      /* Darker overlay than index (index ‚âà 0.40/0.66/0.80) */
      --overlay-a: rgba(0,0,0,0.52);
      --overlay-b: rgba(0,0,0,0.78);
      --overlay-c: rgba(0,0,0,0.90);
    }

    html, body { min-height: 100%; background:#000; }
    body {
      color: #f2f5f8;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: transparent !important;
    }

    /* Animated tile layer (under content) */
    body::after{
      content:"";
      position: fixed; inset: 0; z-index: 0; pointer-events: none;
      background-image: var(--bg-tile);
      background-repeat: repeat;
      background-size: var(--tile-w-size) var(--tile-h-size);
      background-position: 0 0;
      animation: bgInfinite 56s linear infinite;
    }
    @keyframes bgInfinite {
      from { background-position: 0 0; }
      to   { background-position: var(--tile-w-size) var(--tile-h-size); }
    }

    /* Darker readability overlay for booking page */
    body::before{
      content:"";
      position: fixed; inset: 0; z-index: 1; pointer-events: none;
      background: radial-gradient(1200px 600px at 50% -10%,
                  var(--overlay-a), var(--overlay-b) 60%, var(--overlay-c));
    }

    /* Ensure all content sits above background layers */
    .navbar, main, section, footer { position: relative; z-index: 2; }

    /* ===== NAV: transparent like index, unified logo font + left‚Üíright unveil ===== */
    .navbar{
      display:flex; justify-content:space-between; align-items:center;
      padding: 14px 22px;
      background: rgba(0,0,0,0.20);           /* transparent header over the moving bg */
      backdrop-filter: blur(6px);
      border-bottom: 1px solid rgba(255,255,255,0.08);
      position: sticky; top: 0; z-index: 1000;
    }
    .logo{ display:flex; align-items:center; gap:.55rem; }
    .logo .soap{ font-size: 2.2rem; transform: translateY(2px); }
    .logo .logo-text{
      font-family: 'Great Vibes', cursive !important;  /* match About Us */
      font-size: 2.8rem; line-height: 1; letter-spacing: .4px; color:#fff;
      position:relative; display:inline-block;
      clip-path: inset(0 100% 0 0); opacity:0;
      animation: logoUnveil 1.1s ease forwards .25s;
      text-decoration: none;
    }
    @keyframes logoUnveil{0%{clip-path:inset(0 100% 0 0);opacity:0}40%{opacity:1}100%{clip-path:inset(0 0 0 0);opacity:1}}
    @keyframes logoSweep{0%{opacity:1;transform:translateX(-105%)}60%{opacity:.75}100%{opacity:0;transform:translateX(120%)}}
    .logo .logo-text::after{
      content:""; position:absolute; inset:0;
      background: linear-gradient(90deg, rgba(0,212,255,.85), rgba(255,255,255,.95));
      mix-blend-mode: screen; opacity:0; pointer-events:none;
      animation: logoSweep 1.1s ease forwards .25s;
    }

    /* Nav links match site look */
    .nav-links a{
      font-family: 'Bebas Neue', sans-serif;
      letter-spacing: .5px;
      color: #cfe0ee; text-decoration:none; margin-left:18px;
      transition: color .25s ease;
    }
    .nav-links a:hover{ color:#fff; }

    /* ===== Booking page layout (your original UI, unchanged) ===== */
    .booking{
      max-width: 1100px; margin: 0 auto;
      padding: clamp(20px, 4vw, 48px);
    }
    .booking-title{
      font-family: "Bebas Neue", system-ui, sans-serif;
      font-size: clamp(36px, 6vw, 72px);
      letter-spacing: 1px;
      margin: 10px 0 18px;
      text-transform: lowercase;
    }

    .stepper-wrap{ width: 100%; display:flex; justify-content:center; }
    .stepper{
      list-style: none; padding: 10px; margin: 0;
      width: min(100%, 1050px);
      display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px;
      background: rgba(0, 0, 0, 0.55);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.35);
      backdrop-filter: blur(6px);
    }
    .stepper li{
      padding: 14px 12px; text-align: center; border-radius: 12px;
      font-weight: 600; text-transform: lowercase; color: #b6c2cf;
      border: 1px dashed rgba(255,255,255,0.12);
      transition: transform .2s ease, background .2s ease, color .2s ease, border-color .2s ease;
    }
    .stepper li.done{
      color: #0f0;
      border-color: rgba(0, 208, 132, 0.35);
      background: linear-gradient(180deg, rgba(0,208,132,0.12), rgba(0,208,132,0.05));
    }
    .stepper li.active{
      color: #111; 
      background: linear-gradient(180deg, #ffd166, #ffb703);
      border-color: rgba(255,183,3,0.65);
      transform: translateY(-1px);
    }

    .booking-card{
      margin: 18px auto 0; width: min(100%, 1050px);
      background: rgba(10, 12, 16, 0.72);     /* slightly darker card to match page darkness */
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 20px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.45);
      backdrop-filter: blur(8px);
      overflow: hidden;
    }
    .booking-form, .booking-success{ padding: clamp(16px, 3vw, 28px); }

    fieldset{ border: none; margin: 0; padding: 0; }
    legend{ font-weight: 800; font-size: 1.2rem; margin-bottom: 14px; }
    .muted{ color: #b6c2cf; }

    .grid-2{ display: grid; gap: 14px; grid-template-columns: 1fr; }
    .grid-2 .wide{ grid-column: 1 / -1; }
    @media (min-width: 720px){ .grid-2{ grid-template-columns: 1fr 1fr; } }

    label{ display:flex; flex-direction:column; gap:6px; font-size: .95rem; }
    input, select, textarea{
      border-radius: 12px; border: 1px solid rgba(255,255,255,0.08); padding: 12px 12px;
      background: rgba(255,255,255,0.05); color: #f2f5f8; outline: none;
    }
    input:focus, select:focus, textarea:focus{
      border-color: rgba(76,195,255,0.7);
      box-shadow: 0 0 0 3px rgba(76,195,255,0.25);
      background: rgba(255,255,255,0.08);
    }

    .plans{ display:grid; gap:12px; grid-template-columns: 1fr; }
    @media (min-width: 840px){ .plans{ grid-template-columns: repeat(3, 1fr); } }
    .plan{ display:block; }
    .plan input{ display:none; }
    .plan-card{
      border: 1px solid rgba(255,255,255,0.08); border-radius: 14px; padding: 14px;
      background: rgba(255,255,255,0.04);
      transition: transform .2s ease, border-color .2s ease, background .2s ease;
    }
    .plan input:checked + .plan-card{
      border-color: rgba(0,208,132,0.6);
      background: linear-gradient(180deg, rgba(0,208,132,0.12), rgba(0,208,132,0.05));
      transform: translateY(-1px);
    }
    .plan-title{ font-weight: 800; }
    .plan-discount{ color: #00d084; font-weight: 700; }
    .plan-note{ color: #b6c2cf; font-size: .9rem; }

    .actions{ margin-top: 18px; display:flex; gap:10px; justify-content:flex-end; flex-wrap: wrap; }
    .btn{
      appearance: none; border: 1px solid rgba(255,255,255,0.08); color: #0b0d10;
      background: linear-gradient(180deg, #4cc3ff, #00e0a4);
      font-weight: 800; border-radius: 12px; padding: 10px 16px; cursor: pointer;
    }
    .btn.back{
      background: rgba(255,255,255,0.06); color: #f2f5f8;
    }
    .btn:hover{ filter: brightness(1.05); }

    .package-desc{
      border: 1px dashed rgba(255,255,255,0.2);
      border-radius: 12px;
      padding: 12px;
      background: rgba(255,255,255,0.03);
    }

    .review{
      display:grid; gap:10px;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(255,255,255,0.04);
      border-radius: 12px;
      padding: 14px;
    }
    .review dt{ font-weight: 700; color: #b6c2cf; }
    .review dd{ margin: 0 0 10px; }
  </style>
</head>
<body>
  <!-- NAV -->
  <header class="navbar">
    <div class="logo">
      <span class="soap">üßº</span>
      <a class="logo-text" href="index.html">DufferinDeepClean</a>
    </div>
    <nav class="nav-links">
      <a href="index.html#home">Home</a>
      <a href="index.html#services">Services</a>
      <a href="about.html">About Us</a>
    </nav>
  </header>

  <section class="booking">
    <h1 class="booking-title">book online</h1>

    <!-- Long, centered step rectangle -->
    <div class="stepper-wrap">
      <ol class="stepper" id="stepper">
        <li class="active">1. when &amp; where</li>
        <li>2. how often</li>
        <li>3. cleaning type</li>
        <li>4. your details</li>
        <li>5. review &amp; confirm</li>
      </ol>
    </div>

    <!-- Application card -->
    <div class="booking-card">
      <form id="bookingForm" class="booking-form" action="https://formspree.io/f/mrblyqpr" method="POST">
        <!-- STEP 1: When & Where -->
        <fieldset class="step" data-step="1">
          <legend>When &amp; Where</legend>
          <div class="grid-2">
            <label>
              Business name (optional)
              <input type="text" name="business" placeholder="ACME Distribution" />
            </label>
            <label>
              Address
              <input id="address" type="text" name="address" placeholder="123 Main St" required autocomplete="address-line1" />
            </label>
            <label>
              City
              <input id="city" type="text" name="city" placeholder="Mono" required autocomplete="address-level2" />
            </label>
            <label>
              Postal Code
              <input id="postal" type="text" name="postal" placeholder="L9W 1A1" required autocomplete="postal-code" />
            </label>
            <label>
              Preferred date
              <input type="date" name="date" required />
            </label>
            <label>
              Preferred time
              <input type="time" name="time" required />
            </label>
            <label class="wide">
              Approx. square footage
              <input type="number" name="sqft" min="100" step="50" placeholder="e.g., 5,000" required />
            </label>
          </div>
          <div class="actions">
            <button type="button" class="btn next">Next</button>
          </div>
        </fieldset>

        <!-- STEP 2: How Often -->
        <fieldset class="step" data-step="2" hidden>
          <legend>How Often?</legend>
          <p class="muted">Save on recurring cleanings. Choose a frequency.</p>
          <div class="plans">
            <label class="plan">
              <input type="radio" name="frequency" value="weekly" required />
              <div class="plan-card">
                <div class="plan-title">Weekly</div>
                <div class="plan-discount">25% off</div>
                <div class="plan-note">Best value &amp; consistency</div>
              </div>
            </label>
            <label class="plan">
              <input type="radio" name="frequency" value="biweekly" />
              <div class="plan-card">
                <div class="plan-title">Bi-Weekly</div>
                <div class="plan-discount">20% off</div>
                <div class="plan-note">Great for busy offices</div>
              </div>
            </label>
            <label class="plan">
              <input type="radio" name="frequency" value="triweekly" />
              <div class="plan-card">
                <div class="plan-title">Tri-Weekly</div>
                <div class="plan-discount">15% off</div>
                <div class="plan-note">Light traffic spaces</div>
              </div>
            </label>
            <label class="plan">
              <input type="radio" name="frequency" value="monthly" />
              <div class="plan-card">
                <div class="plan-title">Monthly</div>
                <div class="plan-discount">10% off</div>
                <div class="plan-note">Routine upkeep</div>
              </div>
            </label>
            <label class="plan">
              <input type="radio" name="frequency" value="biannual" />
              <div class="plan-card">
                <div class="plan-title">Biannual</div>
                <div class="plan-discount">5% off</div>
                <div class="plan-note">Seasonal refresh</div>
              </div>
            </label>
            <label class="plan">
              <input type="radio" name="frequency" value="onetime" />
              <div class="plan-card">
                <div class="plan-title">One-time</div>
                <div class="plan-discount">‚Äî</div>
                <div class="plan-note">Deep clean on demand</div>
              </div>
            </label>
          </div>
          <div class="actions">
            <button type="button" class="btn back">Back</button>
            <button type="button" class="btn next">Next</button>
          </div>
        </fieldset>

        <!-- STEP 3: Cleaning Type + Packages -->
        <fieldset class="step" data-step="3" hidden>
          <legend>What type of cleaning?</legend>
          <div class="grid-2">
            <label class="wide">
              Select a package
              <select name="package" id="package" required>
                <option value="" disabled selected>Choose a package‚Ä¶</option>
                <option value="industrial">üè≠ Industrial &amp; Warehouse Care</option>
                <option value="office">üñ•Ô∏è Office &amp; Corporate Cleaning</option>
                <option value="specialty">ü™ü Specialty Facility Services</option>
              </select>
            </label>

            <!-- Industrial -->
            <div class="package-desc" id="pkg-industrial" hidden>
              <h4>üè≠ Industrial &amp; Warehouse Care</h4>
              <p class="muted"><strong>Tagline:</strong> Heavy-duty cleaning for high-demand environments.<br/><strong>Ideal for:</strong> Factories, distribution centers, and large-scale workspaces.</p>
              <ul>
                <li>High-dusting and overhead beam cleaning</li>
                <li>Sweeping, scrubbing, and degreasing of production floors</li>
                <li>Equipment and machinery wipe-downs</li>
                <li>Loading dock and storage area cleaning</li>
                <li>Restroom cleaning and sanitation for high-traffic use</li>
              </ul>
            </div>

            <!-- Office -->
            <div class="package-desc" id="pkg-office" hidden>
              <h4>üñ•Ô∏è Office &amp; Corporate Cleaning</h4>
              <p class="muted"><strong>Tagline:</strong> A spotless, professional image for your business.<br/><strong>Ideal for:</strong> Offices, corporate headquarters, and professional buildings.</p>
              <ul>
                <li>Daily surface and workstation cleaning</li>
                <li>Waste removal and recycling service</li>
                <li>Floor care: vacuuming, mopping, and spot-cleaning carpets</li>
                <li>Reception and common-area tidying</li>
                <li>Restroom cleaning and supply replenishment</li>
              </ul>
            </div>

            <!-- Specialty -->
            <div class="package-desc" id="pkg-specialty" hidden>
              <h4>ü™ü Specialty Facility Services</h4>
              <p class="muted"><strong>Tagline:</strong> Targeted deep-cleaning for the areas that matter most.<br/><strong>Ideal for:</strong> Businesses needing targeted or seasonal deep-cleaning.</p>
              <ul>
                <li>Window washing and glass polishing (interior &amp; exterior)</li>
                <li>Cafeteria / lunchroom cleaning and sanitization</li>
                <li>Washroom deep-clean and disinfection</li>
                <li>Touchpoint sanitization (doors, handles, switches)</li>
                <li>Post-construction or move-out cleaning</li>
              </ul>
            </div>
          </div>
          <div class="actions">
            <button type="button" class="btn back">Back</button>
            <button type="button" class="btn next">Next</button>
          </div>
        </fieldset>

        <!-- STEP 4: Contact -->
        <fieldset class="step" data-step="4" hidden>
          <legend>Your contact information</legend>
          <div class="grid-2">
            <label>
              Full name
              <input type="text" name="name" placeholder="Jane Smith" required />
            </label>
            <label>
              Email
              <input type="email" name="email" placeholder="you@company.com" required />
            </label>
            <label>
              Phone
              <input type="tel" name="phone" placeholder="(555) 555-5555" required />
            </label>
            <label class="wide">
              Notes (optional)
              <textarea name="notes" rows="3" placeholder="Access details, special instructions, etc."></textarea>
            </label>
          </div>
          <div class="actions">
            <button type="button" class="btn back">Back</button>
            <button type="button" class="btn next">Next</button>
          </div>
        </fieldset>

        <!-- STEP 5: Review & Confirm -->
        <fieldset class="step" data-step="5" hidden>
          <legend>Review &amp; Confirm</legend>
          <dl class="review" id="reviewList">
            <!-- Filled by JS -->
          </dl>
          <div class="actions">
            <button type="button" class="btn back">Back</button>
            <button type="submit" class="btn submit">Submit</button>
          </div>
        </fieldset>
      </form>

      <div id="bookingSuccess" class="booking-success" hidden>
        <h2>Thanks! Your request has been received.</h2>
        <p>We‚Äôll get back to you within one business day to confirm your booking.</p>
        <a href="index.html" class="btn">Back to Home</a>
      </div>
    </div>
  </section>

  <!-- iOS detector -->
  <script>
    (function () {
      var iOS = /iP(hone|od|ad)/.test(navigator.platform) || (navigator.userAgent.includes('Mac') && navigator.maxTouchPoints > 1);
      if (iOS) document.documentElement.classList.add('ios');
    })();
  </script>

  <!-- Booking wizard JS (unchanged, just scoped to this page) -->
  <script>
    (function(){
      const form = document.getElementById('bookingForm');
      const steps = Array.from(document.querySelectorAll('.step'));
      const stepper = document.getElementById('stepper').children;
      const reviewList = document.getElementById('reviewList');
      let current = 0;

      function showStep(i){
        steps.forEach((s, idx)=>{ s.hidden = idx !== i; });
        Array.from(stepper).forEach((li, idx)=>{
          li.classList.toggle('active', idx === i);
          li.classList.toggle('done', idx < i);
        });
        current = i;
        if (i === 4) buildReview(); // step index 4 = "Step 5"
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }

      document.addEventListener('click', (e)=>{
        if(e.target.matches('.next')){
          const vis = steps[current];
          const req = vis.querySelectorAll('[required]');
          for (const el of req){ if(!el.value){ el.focus(); return; } }
          showStep(Math.min(current+1, steps.length-1));
        }
        if(e.target.matches('.back')){
          showStep(Math.max(current-1, 0));
        }
      });

      form.addEventListener('submit', (e)=>{
        e.preventDefault();
        // Let Formspree submit normally:
        form.submit();
        // If you prefer the inline success card instead, uncomment below:
        // form.hidden = true;
        // document.getElementById('bookingSuccess').hidden = false;
      });

      // package descriptions toggle
      const pkg = document.getElementById('package');
      function updatePkg(){
        const blocks = {
          industrial: document.getElementById('pkg-industrial'),
          office: document.getElementById('pkg-office'),
          specialty: document.getElementById('pkg-specialty')
        };
        Object.values(blocks).forEach(b=> b.hidden = true);
        if (blocks[pkg.value]) blocks[pkg.value].hidden = false;
      }
      if(pkg){ pkg.addEventListener('change', updatePkg); }

      // Build the review summary
      function buildReview(){
        const fd = new FormData(form);
        const freqMap = {
          weekly: 'Weekly (25% off)',
          biweekly: 'Bi-Weekly (20% off)',
          triweekly: 'Tri-Weekly (15% off)',
          monthly: 'Monthly (10% off)',
          biannual: 'Biannual (5% off)',
          onetime: 'One-time'
        };
        const pkgMap = {
          industrial: 'üè≠ Industrial & Warehouse Care',
          office: 'üñ•Ô∏è Office & Corporate Cleaning',
          specialty: 'ü™ü Specialty Facility Services'
        };

        const rows = [
          ['Business', fd.get('business') || '‚Äî'],
          ['Address', [fd.get('address'), fd.get('city'), fd.get('postal')].filter(Boolean).join(', ') || '‚Äî'],
          ['Preferred Date', fd.get('date') || '‚Äî'],
          ['Preferred Time', fd.get('time') || '‚Äî'],
          ['Approx. Sq Ft', fd.get('sqft') || '‚Äî'],
          ['Frequency', freqMap[fd.get('frequency')] || '‚Äî'],
          ['Package', pkgMap[fd.get('package')] || '‚Äî'],
          ['Full Name', fd.get('name') || '‚Äî'],
          ['Email', fd.get('email') || '‚Äî'],
          ['Phone', fd.get('phone') || '‚Äî'],
          ['Notes', (fd.get('notes') || '‚Äî')]
        ];

        reviewList.innerHTML = rows.map(([k,v])=> `<dt>${k}</dt><dd>${String(v).replace(/</g,'&lt;')}</dd>`).join('');
      }

      // init
      showStep(0);
    })();
  </script>

  <!-- OPTIONAL: Google Places Autocomplete (shows "Powered by Google" automatically)
       Replace YOUR_API_KEY_HERE with your Maps JavaScript API key with Places enabled.
       If you skip this, the form still works‚Äîthis block is optional. -->
  <script>
    (function attachPlaces(){
      window.initPlaces = function(){
        if (!window.google || !google.maps || !google.maps.places) return;
        const addr = document.getElementById('address');
        if (!addr) return;
        const ac = new google.maps.places.Autocomplete(addr, {
          types: ['address'],
          fields: ['address_components','formatted_address']
        });
        ac.addListener('place_changed', () => {
          const p = ac.getPlace();
          if (!p || !p.address_components) return;
          const cityEl = document.getElementById('city');
          const postalEl = document.getElementById('postal');
          const comps = p.address_components;

          const get = (type) => (comps.find(c => c.types.includes(type)) || {}).long_name || '';
          const city = get('locality') || get('postal_town') || get('administrative_area_level_3') || '';
          const postal = get('postal_code') || '';

          if (city && cityEl) cityEl.value = city;
          if (postal && postalEl) postalEl.value = postal;
        });
      };

      // If developer adds the script later, this still works.
      // (Do nothing if script isn't present yet.)
    })();
  </script>
  <!-- If you want Places now, uncomment the next line and insert your key:
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY_HERE&libraries=places&callback=initPlaces" async defer></script>
  -->
</body>
</html>
